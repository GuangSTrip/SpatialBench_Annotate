<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€å•è§†é¢‘æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .video-container {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        video {
            width: 100%;
            max-width: 600px;
            height: auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background-color: #f5f5f5;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .log {
            background-color: #000;
            color: #0f0;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ¬ ç®€å•è§†é¢‘æ’­æ”¾æµ‹è¯•</h1>
    
    <div class="test-section">
        <h3>æµ‹è¯•1: ç›´æ¥HTMLè§†é¢‘æ ‡ç­¾</h3>
        <div class="video-container">
            <video controls>
                <source src="/static/videos/sample1.mp4" type="video/mp4">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
            </video>
        </div>
    </div>
    
    <div class="test-section">
        <h3>æµ‹è¯•2: JavaScriptåŠ¨æ€åˆ›å»ºè§†é¢‘</h3>
        <div id="dynamicVideoContainer" class="video-container">
            <p>ç‚¹å‡»æŒ‰é’®åˆ›å»ºè§†é¢‘</p>
        </div>
        <button onclick="createDynamicVideo()">åˆ›å»ºåŠ¨æ€è§†é¢‘</button>
        <button onclick="clearDynamicVideo()">æ¸…é™¤è§†é¢‘</button>
    </div>
    
    <div class="test-section">
        <h3>æµ‹è¯•3: è§†é¢‘ä¿¡æ¯æ£€æŸ¥</h3>
        <button onclick="checkVideoInfo()">æ£€æŸ¥è§†é¢‘ä¿¡æ¯</button>
        <div id="videoInfo"></div>
    </div>
    
    <div class="test-section">
        <h3>æµ‹è¯•4: æ§åˆ¶å°æ—¥å¿—</h3>
        <div id="logOutput" class="log"></div>
        <button onclick="clearLog()">æ¸…é™¤æ—¥å¿—</button>
    </div>
    
    <script>
        function log(message) {
            const logOutput = document.getElementById('logOutput');
            const timestamp = new Date().toLocaleTimeString();
            logOutput.innerHTML += `[${timestamp}] ${message}\n`;
            logOutput.scrollTop = logOutput.scrollHeight;
            console.log(message);
        }
        
        function createDynamicVideo() {
            log('ğŸ¬ å¼€å§‹åˆ›å»ºåŠ¨æ€è§†é¢‘...');
            
            const container = document.getElementById('dynamicVideoContainer');
            container.innerHTML = '';
            
            const video = document.createElement('video');
            video.controls = true;
            video.style.width = '100%';
            video.style.maxWidth = '600px';
            video.style.height = 'auto';
            
            const source = document.createElement('source');
            source.src = '/static/videos/sample1.mp4';
            source.type = 'video/mp4';
            
            video.appendChild(source);
            container.appendChild(video);
            
            // ç»‘å®šäº‹ä»¶
            video.addEventListener('loadstart', () => {
                log('ğŸ”„ åŠ¨æ€è§†é¢‘å¼€å§‹åŠ è½½');
            });
            
            video.addEventListener('canplay', () => {
                log('âœ… åŠ¨æ€è§†é¢‘å¯ä»¥æ’­æ”¾');
                log(`ğŸ¥ è§†é¢‘å°ºå¯¸: ${video.videoWidth} x ${video.videoHeight}`);
                log(`ğŸ¥ è§†é¢‘æ—¶é•¿: ${video.duration}`);
            });
            
            video.addEventListener('error', (e) => {
                log('âŒ åŠ¨æ€è§†é¢‘åŠ è½½é”™è¯¯');
                log(`é”™è¯¯ä»£ç : ${video.error?.code}`);
                log(`é”™è¯¯æ¶ˆæ¯: ${video.error?.message}`);
            });
            
            // å¼ºåˆ¶åŠ è½½
            video.load();
            
            log('âœ… åŠ¨æ€è§†é¢‘å…ƒç´ å·²åˆ›å»º');
        }
        
        function clearDynamicVideo() {
            const container = document.getElementById('dynamicVideoContainer');
            container.innerHTML = '<p>ç‚¹å‡»æŒ‰é’®åˆ›å»ºè§†é¢‘</p>';
            log('ğŸ—‘ï¸ åŠ¨æ€è§†é¢‘å·²æ¸…é™¤');
        }
        
        function checkVideoInfo() {
            log('ğŸ” æ£€æŸ¥é¡µé¢ä¸­çš„è§†é¢‘ä¿¡æ¯...');
            
            const videos = document.querySelectorAll('video');
            log(`æ‰¾åˆ° ${videos.length} ä¸ªè§†é¢‘å…ƒç´ `);
            
            videos.forEach((video, index) => {
                log(`\nè§†é¢‘ ${index + 1}:`);
                log(`- å½“å‰æ—¶é—´: ${video.currentTime}`);
                log(`- æ—¶é•¿: ${video.duration}`);
                log(`- å°ºå¯¸: ${video.videoWidth} x ${video.videoHeight}`);
                log(`- å°±ç»ªçŠ¶æ€: ${video.readyState}`);
                log(`- ç½‘ç»œçŠ¶æ€: ${video.networkState}`);
                log(`- é”™è¯¯: ${video.error ? 'æœ‰é”™è¯¯' : 'æ— é”™è¯¯'}`);
                
                if (video.error) {
                    log(`- é”™è¯¯ä»£ç : ${video.error.code}`);
                    log(`- é”™è¯¯æ¶ˆæ¯: ${video.error.message}`);
                }
            });
        }
        
        function clearLog() {
            document.getElementById('logOutput').innerHTML = '';
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            log('ğŸš€ é¡µé¢åŠ è½½å®Œæˆ');
            log('ğŸ“ è§†é¢‘è·¯å¾„: /static/videos/sample1.mp4');
            
            // æ£€æŸ¥é™æ€è§†é¢‘å…ƒç´ 
            const staticVideo = document.querySelector('video');
            if (staticVideo) {
                log('âœ… æ‰¾åˆ°é™æ€è§†é¢‘å…ƒç´ ');
                
                staticVideo.addEventListener('loadstart', () => {
                    log('ğŸ”„ é™æ€è§†é¢‘å¼€å§‹åŠ è½½');
                });
                
                staticVideo.addEventListener('canplay', () => {
                    log('âœ… é™æ€è§†é¢‘å¯ä»¥æ’­æ”¾');
                });
                
                staticVideo.addEventListener('error', (e) => {
                    log('âŒ é™æ€è§†é¢‘åŠ è½½é”™è¯¯');
                });
            } else {
                log('âŒ æœªæ‰¾åˆ°é™æ€è§†é¢‘å…ƒç´ ');
            }
        });
    </script>
</body>
</html>
